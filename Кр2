using System;
using System.Collections.Generic;
using System.Threading;

// –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
public enum LogLevel
{
    Debug,   // –û—Ç–ª–∞–¥–æ—á–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
    Info,    // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
    Warning, // –£—Ä–æ–≤–µ–Ω—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
    Error    // –£—Ä–æ–≤–µ–Ω—å –æ—à–∏–±–æ–∫
}

// –ö–ª–∞—Å—Å –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –ª–æ–≥–∞
public class LogMessage
{
    public string Content { get; set; }     // –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    public LogLevel Level { get; set; }     // –£—Ä–æ–≤–µ–Ω—å –≤–∞–∂–Ω–æ—Å—Ç–∏
    public DateTime Timestamp { get; set; } // –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞
    public string Source { get; set; }      // –ò—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏—è

    public LogMessage(string source, string content, LogLevel level)
    {
        Source = source;
        Content = content;
        Level = level;
        Timestamp = DateTime.Now; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è
    }
}

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ü–µ–ª–µ–≤—ã—Ö –º–µ—Å—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
public interface ILogTarget
{
    // –ú–µ—Ç–æ–¥ –¥–ª—è –∑–∞–ø–∏—Å–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
    void Log(LogMessage message);
    
    // –ú–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –¥–æ–ª–∂–Ω–æ –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—ã—Ç—å –∑–∞–ø–∏—Å–∞–Ω–æ –≤ —ç—Ç–æ—Ç target
    bool ShouldLog(LogMessage message);
}

// –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
public class Logger
{
    // –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ü–µ–ª–µ–≤—ã—Ö –º–µ—Å—Ç (–∏–º—è -> target)
    private Dictionary<string, ILogTarget> targets = new Dictionary<string, ILogTarget>();

    // –°–æ–±—ã—Ç–∏–µ, –≤–æ–∑–Ω–∏–∫–∞—é—â–µ–µ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–ø–∏—Å–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
    public event Action<LogMessage> MessageLogged;

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–≥–æ –º–µ—Å—Ç–∞
    public void AddTarget(string name, ILogTarget target)
    {
        if (string.IsNullOrEmpty(name))
            throw new ArgumentException("–ò–º—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º", nameof(name));
        
        targets[name] = target; // –î–æ–±–∞–≤–ª—è–µ–º –∏–ª–∏ –∑–∞–º–µ–Ω—è–µ–º target
    }

    // –£–¥–∞–ª–µ–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–≥–æ –º–µ—Å—Ç–∞
    public void RemoveTarget(string name)
    {
        targets.Remove(name);
    }

    // –ú–µ—Ç–æ–¥ –¥–ª—è –∑–∞–ø–∏—Å–∏ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
    public void Debug(string source, string content)
    {
        LogInternal(source, content, LogLevel.Debug);
    }

    // –ú–µ—Ç–æ–¥ –¥–ª—è –∑–∞–ø–∏—Å–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
    public void Info(string source, string content)
    {
        LogInternal(source, content, LogLevel.Info);
    }

    // –ú–µ—Ç–æ–¥ –¥–ª—è –∑–∞–ø–∏—Å–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
    public void Warning(string source, string content)
    {
        LogInternal(source, content, LogLevel.Warning);
    }

    // –ú–µ—Ç–æ–¥ –¥–ª—è –∑–∞–ø–∏—Å–∏ –æ—à–∏–±–∫–∏
    public void Error(string source, string content)
    {
        LogInternal(source, content, LogLevel.Error);
    }

    // –ú–µ—Ç–æ–¥ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –≤—Å–µ—Ö –ª–æ–≥–æ–≤
    public void Clear()
    {
        // –û—á–∏—â–∞–µ–º —Ç–æ–ª—å–∫–æ MemoryTarget (–∫–æ–Ω—Å–æ–ª—å –æ—á–∏—Å—Ç–∏—Ç—å –Ω–µ–ª—å–∑—è)
        foreach (var target in targets.Values)
        {
            if (target is MemoryTarget memoryTarget)
            {
                memoryTarget.Clear();
            }
        }
    }

    // –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–µ—Ç–æ–¥ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    private void LogInternal(string source, string content, LogLevel level)
    {
        var message = new LogMessage(source, content, level);
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–æ –≤—Å–µ —Ü–µ–ª–µ–≤—ã–µ –º–µ—Å—Ç–∞
        foreach (var target in targets.Values)
        {
            if (target.ShouldLog(message)) // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ–ª–∂–µ–Ω –ª–∏ target –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
            {
                target.Log(message); // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            }
        }

        // –í—ã–∑—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–ø–∏—Å–∏
        MessageLogged?.Invoke(message);
    }
}

// –¶–µ–ª–µ–≤–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å
public class ConsoleTarget : ILogTarget
{
    public LogLevel MinLevel { get; } // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

    public ConsoleTarget(LogLevel minLevel)
    {
        MinLevel = minLevel;
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ–ª–∂–Ω–æ –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—ã—Ç—å –∑–∞–ø–∏—Å–∞–Ω–æ (—É—Ä–æ–≤–µ–Ω—å >= –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ)
    public bool ShouldLog(LogMessage message)
    {
        return message.Level >= MinLevel;
    }

    // –ó–∞–ø–∏—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å —Ü–≤–µ—Ç–æ–≤—ã–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º
    public void Log(LogMessage message)
    {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ –∫–æ–Ω—Å–æ–ª–∏
        var originalColor = Console.ForegroundColor;
        var originalBgColor = Console.BackgroundColor;

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è
        SetColors(message.Level);
        
        // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —É—Ä–æ–≤–µ–Ω—å –≤ —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
        string levelStr = message.Level switch
        {
            LogLevel.Debug => "DEBUG",
            LogLevel.Info => "INFO",
            LogLevel.Warning => "WARNING",
            LogLevel.Error => "ERROR",
            _ => "UNKNOWN"
        };

        // –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: [–£–†–û–í–ï–ù–¨] –ì–ì–ì–ì-–ú–ú-–î–î –ß–ß:–ú–ú:–°–° | –¢–µ–∫—Å—Ç
        Console.WriteLine($"[{levelStr}] {message.Timestamp:yyyy-MM-dd HH:mm:ss} | {message.Content}");
        
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞
        Console.ForegroundColor = originalColor;
        Console.BackgroundColor = originalBgColor;
    }

    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–≤–µ—Ç–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    private void SetColors(LogLevel level)
    {
        switch (level)
        {
            case LogLevel.Debug:
                Console.ForegroundColor = ConsoleColor.Blue;    // –°–∏–Ω–∏–π —Ç–µ–∫—Å—Ç
                Console.BackgroundColor = ConsoleColor.Gray;    // –°–µ—Ä—ã–π —Ñ–æ–Ω
                break;
            case LogLevel.Info:
                Console.ForegroundColor = ConsoleColor.White;   // –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç
                Console.BackgroundColor = ConsoleColor.Black;   // –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω
                break;
            case LogLevel.Warning:
                Console.ForegroundColor = ConsoleColor.Black;   // –ß–µ—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç
                Console.BackgroundColor = ConsoleColor.Yellow;  // –ñ–µ–ª—Ç—ã–π —Ñ–æ–Ω
                break;
            case LogLevel.Error:
                Console.ForegroundColor = ConsoleColor.White;   // –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç
                Console.BackgroundColor = ConsoleColor.Red;     // –ö—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω
                break;
        }
    }
}

// –¶–µ–ª–µ–≤–æ–µ –º–µ—Å—Ç–æ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ø–∞–º—è—Ç–∏
public class MemoryTarget : ILogTarget
{
    public LogLevel MinLevel { get; }     // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    public int MaxMessages { get; }       // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
    public List<LogMessage> Messages { get; private set; } // –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π

    public MemoryTarget(LogLevel minLevel, int maxMessages = 100)
    {
        MinLevel = minLevel;
        MaxMessages = maxMessages;
        Messages = new List<LogMessage>();
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ–ª–∂–Ω–æ –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—ã—Ç—å –∑–∞–ø–∏—Å–∞–Ω–æ
    public bool ShouldLog(LogMessage message)
    {
        return message.Level >= MinLevel;
    }

    // –ó–∞–ø–∏—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç—å —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
    public void Log(LogMessage message)
    {
        Messages.Add(message);
        
        // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π - —É–¥–∞–ª—è–µ–º —Å–∞–º—ã–µ —Å—Ç–∞—Ä—ã–µ
        if (Messages.Count > MaxMessages)
        {
            Messages.RemoveAt(0); // –£–¥–∞–ª—è–µ–º –ø–µ—Ä–≤–æ–µ (—Å–∞–º–æ–µ —Å—Ç–∞—Ä–æ–µ) —Å–æ–æ–±—â–µ–Ω–∏–µ
        }
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–ø–∏–∏ —Å–ø–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
    public List<LogMessage> GetMessages()
    {
        return new List<LogMessage>(Messages); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–ø–∏—é –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
    }

    // –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –ø–∞–º—è—Ç–∏
    public void Clear()
    {
        Messages.Clear();
    }
}

public class Program
{
    static void Main()
    {
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–¥–∏—Ä–æ–≤–∫—É –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Unicode —Å–∏–º–≤–æ–ª–æ–≤ (—ç–º–æ–¥–∑–∏)
        Console.OutputEncoding = System.Text.Encoding.Unicode;

        // –°–æ–∑–¥–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–≥–µ—Ä
        var logger = new Logger();

        // –°–æ–∑–¥–∞–µ–º —Ü–µ–ª–µ–≤—ã–µ –º–µ—Å—Ç–∞ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
        // - –ö–æ–Ω—Å–æ–ª—å: –ª–æ–≥–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ Warning –∏ Error
        // - –ü–∞–º—è—Ç—å: –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ —É—Ä–æ–≤–Ω–∏ (Debug –∏ –≤—ã—à–µ), —Ö—Ä–∞–Ω–∏—Ç 100 —Å–æ–æ–±—â–µ–Ω–∏–π
        var consoleTarget = new ConsoleTarget(LogLevel.Warning);
        var memoryTarget = new MemoryTarget(LogLevel.Debug, 100);

        // –î–æ–±–∞–≤–ª—è–µ–º —Ü–µ–ª–µ–≤—ã–µ –º–µ—Å—Ç–∞ –≤ –ª–æ–≥–≥–µ—Ä
        logger.AddTarget("–ö–æ–Ω—Å–æ–ª—å", consoleTarget);
        logger.AddTarget("–ü–∞–º—è—Ç—å", memoryTarget);

        // –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ –∑–∞–ø–∏—Å–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
        logger.MessageLogged += (message) =>
            Console.WriteLine($"üìù –ó–∞–ø–∏—Å–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ: {message.Source} {message.Content}");

        // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        Console.WriteLine("=== –¢–µ—Å—Ç 1: –†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ===");
        logger.Debug("–¢–µ—Å—Ç1", "–û—Ç–ª–∞–¥–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ");      // –ù–µ –ø–æ–∫–∞–∂–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏ (—É—Ä–æ–≤–µ–Ω—å –Ω–∏–∂–µ Warning)
        logger.Info("–¢–µ—Å—Ç1", "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ");   // –ù–µ –ø–æ–∫–∞–∂–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏ (—É—Ä–æ–≤–µ–Ω—å –Ω–∏–∂–µ Warning)
        logger.Warning("–¢–µ—Å—Ç1", "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ");          // –ü–æ–∫–∞–∂–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏
        logger.Error("–¢–µ—Å—Ç1", "–û—à–∏–±–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–µ");          // –ü–æ–∫–∞–∂–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏

        // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Ä–∞–∑–ª–∏—á–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Ç–µ—Å—Ç–∞—Ö
        Thread.Sleep(100);

        // –¢–µ—Å—Ç 2: –°–æ–æ–±—â–µ–Ω–∏—è —Å —Ä–∞–∑–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
        Console.WriteLine("\n=== –¢–µ—Å—Ç 2: –°–æ–æ–±—â–µ–Ω–∏—è —Å —Ä–∞–∑–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ ===");
        logger.Info("–¢–µ—Å—Ç2", "–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è");
        logger.Info("–¢–µ—Å—Ç2", "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö");
        logger.Warning("–¢–µ—Å—Ç2", "–ú–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ");    // –ü–æ–∫–∞–∂–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏

        Thread.Sleep(100);

        // –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ (—Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤)
        Console.WriteLine("\n=== –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ ===");
        for (int i = 0; i < 105; i++)
        {
            logger.Info("–¢–µ—Å—Ç3", $"–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ {i + 1}");
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤ –ø–∞–º—è—Ç–∏ –æ—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ 100 —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–æ—Å–ª–µ–¥–Ω–∏–µ)
        Console.WriteLine($"\n–°–æ–æ–±—â–µ–Ω–∏–π –≤ –ø–∞–º—è—Ç–∏: {memoryTarget.GetMessages().Count}");
        Console.WriteLine($"–ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏: {memoryTarget.Messages[memoryTarget.Messages.Count - 1].Content}");

        // –¢–µ—Å—Ç 4: –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤
        Console.WriteLine("\n=== –¢–µ—Å—Ç 4: –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ ===");
        logger.Clear();
        Console.WriteLine("–õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã");
        Console.WriteLine($"–°–æ–æ–±—â–µ–Ω–∏–π –≤ –ø–∞–º—è—Ç–∏: {memoryTarget.GetMessages().Count}");
    }
}
